version: 0.1
runson: linux

autosplit: true
concurrency: 4

testDiscovery:
  type: raw
  mode: remote
  command: snooper --targetOs=mac --featureFilePaths=resources/features/ --frameWork=java | sed 's/:.*//' | uniq

#raw command means actuall cli commands with discovery to happen in remote machine and fetch all scenarios and filter out till features and give on unquie ones.

testRunnerCommand: |
  echo "Running test: $test"
  mvn test -Dmaven.repo.local=.m2 -Dsurefire.suiteXmlFiles=testNG_BDD.xml -Dscenario.file.loc="$test"

cacheKey: '{{ checksum "pom.xml" }}'
cacheDirectories:
  - .m2

pre:
  - echo "Starting Test..."
  - mvn dependency:resolve -Dmaven.repo.local=.m2

jobLabel: ['QAF', 'Linux', 'AutoSplit', 'Features: All']

project:
  name: Test Project Auto
differentialUpload:
  enabled: true
  ttlHours: 24